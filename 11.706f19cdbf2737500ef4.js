(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"YK+w":function(t,n,e){"use strict";e.r(n);var l=e("CcnG"),i=function(){return function(){}}(),a=e("pMnS"),o=e("qtlX"),r=e("fBTL"),u=e("ioIN"),s=e("Ip0R"),p=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function d(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,1,"div",[["style","position:relative"]],[[4,"width",null],[4,"height",null]],null,null,null,null)),(t()(),l["\u0275eld"](1,0,null,null,0,"canvas",[],[[1,"width",0],[1,"height",0]],[[null,"click"]],function(t,n,e){var l=!0;return"click"===n&&(l=!1!==t.component.onCanvasClick(e)&&l),l},null,null))],null,function(t,n){var e=n.component;t(n,0,0,e.responsive&&!e.width?null:e.width,e.responsive&&!e.height?null:e.height),t(n,1,0,e.responsive&&!e.width?null:e.width,e.responsive&&!e.height?null:e.height)})}var c=e("AytR"),h=e("wd/R"),f=(e("xdRZ"),e("67Y/")),g=e("zc0k"),v=function(){function t(t){this.http=t,this.lancamentosUrl=c.a.apiUrl+"/lancamentos"}return t.prototype.lancamentoPorCategoria=function(){return this.http.get(this.lancamentosUrl+"/estatisticas/por-categoria")},t.prototype.lancamentoPorDia=function(){var t=this;return this.http.get(this.lancamentosUrl+"/estatisticas/por-dia").pipe(Object(f.a)(function(n){return t.converterStringsParaDatas(n),n}))},t.prototype.converterStringsParaDatas=function(t){for(var n=0,e=t;n<e.length;n++){var l=e[n];l.dia=h(l.dia,"YYYY-MM-DD").toDate()}},t.ngInjectableDef=l["\u0275\u0275defineInjectable"]({factory:function(){return new t(l["\u0275\u0275inject"](g.a))},token:t,providedIn:"root"}),t}(),m=function(){function t(t,n){var e=this;this.dashboardService=t,this.decimalPipe=n,this.options={tooltips:{callbacks:{label:function(t,n){var l=n.datasets[t.datasetIndex];return(l.label?l.label+": ":"")+e.decimalPipe.transform(l.data[t.index],"1.2-2")}}}}}return t.prototype.ngOnInit=function(){this.configurarGraficoPizza(),this.configurarGraficoLinha()},t.prototype.configurarGraficoPizza=function(){var t=this;this.dashboardService.lancamentoPorCategoria().subscribe(function(n){t.pieChartData={labels:n.map(function(t){return t.categoria.nome}),datasets:[{data:n.map(function(t){return t.total}),backgroundColor:["#FF9900","#109618","#990099","#3B3EAC","#0099C6","#DD4477","#3366CC","#DC3912"]}]}})},t.prototype.configurarGraficoLinha=function(){var t=this;this.dashboardService.lancamentoPorDia().subscribe(function(n){var e=t.configurarDiasMes(),l=t.totaisPorCadaDiaMes(n.filter(function(t){return"RECEITA"===t.tipo}),e),i=t.totaisPorCadaDiaMes(n.filter(function(t){return"DESPESA"===t.tipo}),e);t.lineChartData={labels:e,datasets:[{label:"Receitas",data:l,borderColor:"#3366CC"},{label:"Despesas",data:i,borderColor:"#D62B00"}]}})},t.prototype.totaisPorCadaDiaMes=function(t,n){for(var e=[],l=0,i=n;l<i.length;l++){for(var a=i[l],o=0,r=0,u=t;r<u.length;r++){var s=u[r];if(s.dia.getDate()===a){o=s.total;break}}e.push(o)}return e},t.prototype.configurarDiasMes=function(){var t=new Date;t.setMonth(t.getMonth()+1),t.setDate(0);for(var n=t.getDate(),e=[],l=1;l<n;l++)e.push(l);return e},t}(),y=l["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function C(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,16,"div",[["class","container"]],null,null,null,null,null)),(t()(),l["\u0275eld"](1,0,null,null,15,"div",[["class","ui-g"]],null,null,null,null,null)),(t()(),l["\u0275eld"](2,0,null,null,2,"div",[["class","ui-g-12"]],null,null,null,null,null)),(t()(),l["\u0275eld"](3,0,null,null,1,"h1",[],null,null,null,null,null)),(t()(),l["\u0275ted"](-1,null,["Dashboard"])),(t()(),l["\u0275eld"](5,0,null,null,5,"div",[["class","ui-g-12 ui-md-6"]],null,null,null,null,null)),(t()(),l["\u0275eld"](6,0,null,null,4,"p-panel",[["header","Lan\xe7amentos por categoria"]],null,null,null,o.b,o.a)),l["\u0275did"](7,49152,null,1,r.Panel,[l.ElementRef],{header:[0,"header"]},null),l["\u0275qud"](335544320,1,{footerFacet:0}),(t()(),l["\u0275eld"](9,0,null,1,1,"p-chart",[["type","pie"]],null,null,null,d,p)),l["\u0275did"](10,4374528,null,0,u.UIChart,[l.ElementRef],{type:[0,"type"],options:[1,"options"],data:[2,"data"]},null),(t()(),l["\u0275eld"](11,0,null,null,5,"div",[["class","ui-g-12 ui-md-6"]],null,null,null,null,null)),(t()(),l["\u0275eld"](12,0,null,null,4,"p-panel",[["header","Lan\xe7amentos por dia"]],null,null,null,o.b,o.a)),l["\u0275did"](13,49152,null,1,r.Panel,[l.ElementRef],{header:[0,"header"]},null),l["\u0275qud"](335544320,2,{footerFacet:0}),(t()(),l["\u0275eld"](15,0,null,1,1,"p-chart",[["type","line"]],null,null,null,d,p)),l["\u0275did"](16,4374528,null,0,u.UIChart,[l.ElementRef],{type:[0,"type"],options:[1,"options"],data:[2,"data"]},null)],function(t,n){var e=n.component;t(n,7,0,"Lan\xe7amentos por categoria"),t(n,10,0,"pie",e.options,e.pieChartData),t(n,13,0,"Lan\xe7amentos por dia"),t(n,16,0,"line",e.options,e.lineChartData)},null)}function D(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,1,"app-dashboard",[],null,null,null,C,y)),l["\u0275did"](1,114688,null,0,m,[v,s.DecimalPipe],null,null)],function(t,n){t(n,1,0)},null)}var b=l["\u0275ccf"]("app-dashboard",m,D,{},{},[]),M=e("7LN8"),w=e("IL0X"),I=e("PCNd"),P=e("ZYCi"),E={roles:["ROLE_PESQUISAR_LANCAMENTO"]},L=function(){return function(){}}(),S=e("N/MO");e.d(n,"DashboardModuleNgFactory",function(){return R});var R=l["\u0275cmf"](i,[],function(t){return l["\u0275mod"]([l["\u0275mpd"](512,l.ComponentFactoryResolver,l["\u0275CodegenComponentFactoryResolver"],[[8,[a.a,b]],[3,l.ComponentFactoryResolver],l.NgModuleRef]),l["\u0275mpd"](4608,s.NgLocalization,s.NgLocaleLocalization,[l.LOCALE_ID,[2,s["\u0275angular_packages_common_common_a"]]]),l["\u0275mpd"](4608,s.DecimalPipe,s.DecimalPipe,[l.LOCALE_ID]),l["\u0275mpd"](1073742336,s.CommonModule,s.CommonModule,[]),l["\u0275mpd"](1073742336,M.SharedModule,M.SharedModule,[]),l["\u0275mpd"](1073742336,r.PanelModule,r.PanelModule,[]),l["\u0275mpd"](1073742336,u.ChartModule,u.ChartModule,[]),l["\u0275mpd"](1073742336,w.MessageModule,w.MessageModule,[]),l["\u0275mpd"](1073742336,I.a,I.a,[]),l["\u0275mpd"](1073742336,P.o,P.o,[[2,P.t],[2,P.k]]),l["\u0275mpd"](1073742336,L,L,[]),l["\u0275mpd"](1073742336,i,i,[]),l["\u0275mpd"](1024,P.i,function(){return[[{path:"",component:m,canActivate:[S.a],data:E}]]},[])])})},ioIN:function(t,n,e){var l=e("mrSG").__decorate,i=e("mrSG").__metadata;Object.defineProperty(n,"__esModule",{value:!0});var a=e("CcnG"),o=e("Ip0R"),r=function(){function t(t){this.el=t,this.options={},this.plugins=[],this.responsive=!0,this.onDataSelect=new a.EventEmitter}return Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(t){this._data=t,this.reinit()},enumerable:!0,configurable:!0}),t.prototype.ngAfterViewInit=function(){this.initChart(),this.initialized=!0},t.prototype.onCanvasClick=function(t){if(this.chart){var n=this.chart.getElementAtEvent(t),e=this.chart.getDatasetAtEvent(t);n&&n[0]&&e&&this.onDataSelect.emit({originalEvent:t,element:n[0],dataset:e})}},t.prototype.initChart=function(){var t=this.options||{};t.responsive=this.responsive,t.responsive&&(this.height||this.width)&&(t.maintainAspectRatio=!1),this.chart=new Chart(this.el.nativeElement.children[0].children[0],{type:this.type,data:this.data,options:this.options,plugins:this.plugins})},t.prototype.getCanvas=function(){return this.el.nativeElement.children[0].children[0]},t.prototype.getBase64Image=function(){return this.chart.toBase64Image()},t.prototype.generateLegend=function(){if(this.chart)return this.chart.generateLegend()},t.prototype.refresh=function(){this.chart&&this.chart.update()},t.prototype.reinit=function(){this.chart&&(this.chart.destroy(),this.initChart())},t.prototype.ngOnDestroy=function(){this.chart&&(this.chart.destroy(),this.initialized=!1,this.chart=null)},l([a.Input(),i("design:type",String)],t.prototype,"type",void 0),l([a.Input(),i("design:type",Object)],t.prototype,"options",void 0),l([a.Input(),i("design:type",Array)],t.prototype,"plugins",void 0),l([a.Input(),i("design:type",String)],t.prototype,"width",void 0),l([a.Input(),i("design:type",String)],t.prototype,"height",void 0),l([a.Input(),i("design:type",Boolean)],t.prototype,"responsive",void 0),l([a.Output(),i("design:type",a.EventEmitter)],t.prototype,"onDataSelect",void 0),l([a.Input(),i("design:type",Object),i("design:paramtypes",[Object])],t.prototype,"data",null),l([a.Component({selector:"p-chart",template:'\n        <div style="position:relative" [style.width]="responsive && !width ? null : width" [style.height]="responsive && !height ? null : height">\n            <canvas [attr.width]="responsive && !width ? null : width" [attr.height]="responsive && !height ? null : height" (click)="onCanvasClick($event)"></canvas>\n        </div>\n    '})],t)}();n.UIChart=r,n.ChartModule=function(){return l([a.NgModule({imports:[o.CommonModule],exports:[r],declarations:[r]})],function(){})}()}}]);